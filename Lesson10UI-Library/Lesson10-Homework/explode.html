<!--

lets test and figure out how the timer function works
-->

<!doctype html>
<html>
<head>
  <title>jQuery Project: An exploding game</title>
  <meta charset="utf-8">
  <style>
body, html {
    width: 100%;
    height: 100%;
}
div.box {
    position: absolute;
    width: 100px;
    height: 100px;
    background-color: orange;
}
div.exploding {
    position: absolute;
    width: 100px;
    height: 100px;
    background-color: red;
}
</style>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"> </script>

<!--add javascript here -->
<script>

//get window dimensions
var $windowWidth = $( window ).width();
var $windowHeight = $( window ).height();
//log window dimensions to console
console.log('window width is: ' +$windowWidth);
console.log('window height is: ' +$windowHeight);

//initialize number of boxes
var numBoxesToDisplay=1;

//initialize game round counter
var round=0;

$(document).ready(function ()  {

//add the basic container div to the page
$("body").append("<div class=\"container\"></div>");

function mysetTimeoutFunction()	{
	console.log('this is the timeout function');
	//increment the round by one
	round =round+1;
	console.log('the game round is: ' + round);
	//call the function to calculate the boxes needed, pass in current numBoxes as argument
	numBoxesToDisplay = calcNumBoxesToDisplay(numBoxesToDisplay,round);
	console.log('the number of boxes we need to display is: ' + numBoxesToDisplay);
	//call the function that displays the boxes to the screen
	displayBoxesToScreen(numBoxesToDisplay,$windowWidth,$windowHeight);
	//set up timer
	timer = setTimeout(mysetTimeoutFunction,4000);
}

mysetTimeoutFunction();

 //create click event for box so user can blow up box by clicking on it
  $myBox = $("div.box");
  console.log($myBox);
  $myBox.click(function() {
	  $myBox.removeClass("box");
	  //set box class to 'exploding'
	  $myBox.addClass("exploding");
	  //use jquery 'exploding effect to 'blow up' the box
	  $myBox.toggle("explode");
	  //remove box completely from DOM
	  $myBox.remove();
  });


}); 
  
  /////function to figure out number of boxes to display/////
  function calcNumBoxesToDisplay(numBoxesToDisplay,round)	{
	  //Figure out how many boxes we need to display
		  //if the game is just started, the numBoxes to display is just one
		  if (numBoxesToDisplay ==1 && round==1)	{
			  numBoxesToDisplay = 1;
			  console.log('the number of boxes to display is: ' + numBoxesToDisplay);
			  return numBoxesToDisplay;
		  }
		  //otherwise, just take the numBoxes from prior round and multiply by 2
		else {
			numBoxesToDisplay = numBoxesToDisplay*2;
			console.log('the number of boxes to display is: ' + numBoxesToDisplay);
			return numBoxesToDisplay;
		}
  }
  
  /////function to display boxes to screen/////
  function displayBoxesToScreen(numBoxesToDisplay,$windowWidth,$windowHeight)	{
	//make sure all the boxes fit within the screen
	for (var i = 0; i <numBoxesToDisplay; i++) {
		//make sure all the boxes fit within the screen
		//calculate the x/y coordinates of the box
		var $x = Math.floor(Math.random() * ($windowWidth-80));
		var $y = Math.floor(Math.random() * ($windowHeight-80));
		console.log('for box #' + i + ' the x dimension is: ' + $x + ' the y dimension is: ' + $y);
		//add the box divs to the container div
		$("<div></div>").appendTo(".container").addClass("box").css({
			top:$y,
			left:$x
		})
		
	}
  } 



    </script>

</head>
<body>

</body>
</html>

